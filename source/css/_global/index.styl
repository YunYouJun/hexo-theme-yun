@import 'reset.styl';

$bg-color = convert(hexo-config('colors.bg'));

:root {
  if ($bg-color) {
    --hty-bg-color: $bg-color;
  }

  --hty-primary: $colors.primary;
}

html {
  if (hexo-config('smoothScroll')) {
    scroll-behavior: smooth;
  }
}

$bg-image-url = hexo-config('bg_image.url');
$bg-blur = convert(hexo-config('bg_image.blur'));
$bg-opacity = hexo-config('bg_image.opacity');

body {
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
  background-color: var(--hty-bg-color, #f5f5f5);

  if (hexo-config('bg_image.enable')) {
    &::before {
      content: '';
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: $bg-opacity;
      background-image: url($bg-image-url);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      animation-name: bgFadeIn;
      animation-duration: 2s;
      opacity: $bg-opacity;

      if ($bg-blur) {
        filter: blur($bg-blur);
      }
    }

    @keyframes bgFadeIn {
      from {
        opacity: 0;
        filter: blur($bg-blur) grayscale(1);
      }

      to {
        opacity: $bg-opacity;
        filter: blur($bg-blur);
      }
    }
  }
}
